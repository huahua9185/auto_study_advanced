2025-09-11 16:41:28,311 - INFO - 开始测试正确的视频URL格式
2025-09-11 16:41:28,311 - INFO - 初始化浏览器和登录...
2025-09-11 16:41:29,391 - INFO - 浏览器初始化成功
2025-09-11 16:41:40,187 - INFO - 执行登录...
2025-09-11 16:41:40,188 - INFO - 开始登录流程 (主要尝试 1/3)
2025-09-11 16:41:40,188 - INFO - 导航到登录页面
2025-09-11 16:42:44,717 - INFO - 点击登录按钮成功: button:has-text("登录")
2025-09-11 16:42:44,718 - INFO - 验证码尝试 1/5
2025-09-11 16:42:45,105 - INFO - 用户名填写成功，使用选择器: input[placeholder="用户名"]
2025-09-11 16:42:46,312 - INFO - 密码填写成功，使用选择器: input[type="password"].el-input__inner
2025-09-11 16:42:47,144 - INFO - 开始智能验证码处理
2025-09-11 16:42:47,166 - INFO - 找到验证码输入框，使用选择器: input[placeholder="验证码"].el-input__inner
2025-09-11 16:42:47,180 - INFO - 找到验证码图片: img[src*="/device/login!get_auth_code.do"], 尺寸: 110x40
2025-09-11 16:42:47,180 - INFO - 开始识别4位数字验证码
2025-09-11 16:42:47,181 - INFO - 验证码识别尝试 1/3
2025-09-11 16:42:47,236 - WARNING - 识别结果长度不足: 935 (3位)
2025-09-11 16:42:47,237 - INFO - 验证码识别结果: q3s -> 
2025-09-11 16:42:47,261 - WARNING - 识别结果长度不足: 935 (3位)
2025-09-11 16:42:47,261 - INFO - 验证码识别结果: q3s -> 
2025-09-11 16:42:47,261 - INFO - 验证码识别尝试 2/3
2025-09-11 16:42:47,261 - INFO - 刷新验证码
2025-09-11 16:42:49,444 - WARNING - 识别结果长度不足: 238 (3位)
2025-09-11 16:42:49,444 - INFO - 验证码识别结果: 238 -> 
2025-09-11 16:42:49,476 - WARNING - 识别结果长度不足: 238 (3位)
2025-09-11 16:42:49,477 - INFO - 验证码识别结果: 238 -> 
2025-09-11 16:42:49,477 - INFO - 验证码识别尝试 3/3
2025-09-11 16:42:49,477 - INFO - 刷新验证码
2025-09-11 16:42:51,693 - INFO - 验证码识别结果: 1353 -> 1353
2025-09-11 16:42:51,694 - INFO - 识别结果: 1353
2025-09-11 16:42:51,694 - INFO - 开始填写验证码
2025-09-11 16:42:52,370 - INFO - 验证码填写成功，使用选择器: input[placeholder="验证码"].el-input__inner
2025-09-11 16:42:53,525 - INFO - 验证码输入完成: 1353
2025-09-11 16:42:54,578 - INFO - 找到提交按钮，使用选择器: button.el-button.el-button--primary:has-text("登录")
2025-09-11 16:42:55,047 - INFO - 登录表单已提交（通过点击按钮）
2025-09-11 16:42:55,635 - ERROR - 登录失败: 校验码错误
2025-09-11 16:42:55,635 - WARNING - 填写表单失败，重试
2025-09-11 16:42:55,635 - INFO - 验证码尝试 2/5
2025-09-11 16:42:55,994 - INFO - 用户名填写成功，使用选择器: input[placeholder="用户名"]
2025-09-11 16:42:57,196 - INFO - 密码填写成功，使用选择器: input[type="password"].el-input__inner
2025-09-11 16:42:58,021 - INFO - 开始智能验证码处理
2025-09-11 16:42:58,043 - INFO - 找到验证码输入框，使用选择器: input[placeholder="验证码"].el-input__inner
2025-09-11 16:42:58,058 - INFO - 找到验证码图片: img[src*="/device/login!get_auth_code.do"], 尺寸: 110x40
2025-09-11 16:42:58,059 - INFO - 开始识别4位数字验证码
2025-09-11 16:42:58,059 - INFO - 验证码识别尝试 1/3
2025-09-11 16:42:58,094 - WARNING - 识别结果长度不足: 944 (3位)
2025-09-11 16:42:58,094 - INFO - 验证码识别结果: q44 -> 
2025-09-11 16:42:58,125 - WARNING - 识别结果长度不足: 944 (3位)
2025-09-11 16:42:58,125 - INFO - 验证码识别结果: q44 -> 
2025-09-11 16:42:58,125 - INFO - 验证码识别尝试 2/3
2025-09-11 16:42:58,125 - INFO - 刷新验证码
2025-09-11 16:43:00,310 - INFO - 验证码识别结果: 733Q -> 7330
2025-09-11 16:43:00,310 - INFO - 识别结果: 7330
2025-09-11 16:43:00,310 - INFO - 开始填写验证码
2025-09-11 16:43:00,994 - INFO - 验证码填写成功，使用选择器: input[placeholder="验证码"].el-input__inner
2025-09-11 16:43:02,348 - INFO - 验证码输入完成: 7330
2025-09-11 16:43:03,397 - INFO - 找到提交按钮，使用选择器: button.el-button.el-button--primary:has-text("登录")
2025-09-11 16:43:03,869 - INFO - 登录表单已提交（通过点击按钮）
2025-09-11 16:43:04,609 - INFO - 登录成功（无错误、无登录表单、有Session）
2025-09-11 16:43:04,609 - INFO - 登录成功！
2025-09-11 16:43:04,617 - INFO - 未找到登录按钮，使用回车键提交
2025-09-11 16:43:07,819 - INFO - URL已跳转，登录可能成功
2025-09-11 16:43:07,819 - INFO - 登录成功！
2025-09-11 16:43:07,819 - INFO - 登录成功
2025-09-11 16:43:07,819 - INFO - 测试必修课URL格式...
2025-09-11 16:43:07,819 - INFO - 访问测试URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=10598&name=%E5%AD%A6%E5%91%98%E4%B8%AD%E5%BF%83&user_course_id=1988340
2025-09-11 16:43:10,925 - INFO - 当前URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=10598&name=%E5%AD%A6%E5%91%98%E4%B8%AD%E5%BF%83&user_course_id=1988340
2025-09-11 16:43:10,925 - INFO - 页面标题: 宁夏干部教育培训网络学院
2025-09-11 16:43:10,925 - INFO - ✅ 成功到达video_page页面
2025-09-11 16:43:12,947 - INFO - 找到视频元素: iframe[src*="play"] - {'selector': 'iframe[src*="play"]', 'tag': 'iframe', 'src': '/device/study_new!scorm_play.do?terminal=1&id=1988340', 'class': 'player', 'id': '', 'visible': True}
2025-09-11 16:43:12,959 - INFO - 找到视频元素: [class*="video"] - {'selector': '[class*="video"]', 'tag': 'div', 'src': '', 'class': 'video', 'id': '', 'visible': True}
2025-09-11 16:43:12,966 - INFO - 找到视频元素: [class*="video"] - {'selector': '[class*="video"]', 'tag': 'div', 'src': '', 'class': 'video_box wrapper', 'id': '', 'visible': True}
2025-09-11 16:43:12,994 - INFO - 找到学习相关元素: [class*="course"] (19个)
2025-09-11 16:43:13,032 - INFO - 截图已保存: data/correct_video_required_1757580192.png
2025-09-11 16:43:13,033 - INFO - HTML已保存: data/correct_video_required_1757580192.html
2025-09-11 16:43:13,033 - INFO - 测试选修课URL格式...
2025-09-11 16:43:13,033 - INFO - 访问测试URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=11362&user_course_id=1991630&name=%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%BF%83
2025-09-11 16:43:17,049 - INFO - 当前URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=11362&user_course_id=1991630&name=%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%BF%83
2025-09-11 16:43:17,049 - INFO - 页面标题: 宁夏干部教育培训网络学院
2025-09-11 16:43:17,049 - INFO - ✅ 成功到达video_page页面
2025-09-11 16:43:19,123 - INFO - 找到学习相关元素: [class*="course"] (19个)
2025-09-11 16:43:19,138 - INFO - 截图已保存: data/correct_video_elective_1757580199.png
2025-09-11 16:43:19,139 - INFO - HTML已保存: data/correct_video_elective_1757580199.html
2025-09-11 16:43:19,139 - INFO - 测试结果已保存到 correct_video_url_test_results.json
2025-09-11 16:43:19,139 - INFO - ============================================================
2025-09-11 16:43:19,139 - INFO - 正确视频URL格式测试结果总结
2025-09-11 16:43:19,139 - INFO - ============================================================
2025-09-11 16:43:19,139 - INFO - 必修课测试结果:
2025-09-11 16:43:19,139 - INFO -   URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=10598&name=%E5%AD%A6%E5%91%98%E4%B8%AD%E5%BF%83&user_course_id=1988340
2025-09-11 16:43:19,139 - INFO -   页面到达正确: ✅
2025-09-11 16:43:19,139 - INFO -   视频加载成功: ✅
2025-09-11 16:43:19,139 - INFO -   当前URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=10598&name=%E5%AD%A6%E5%91%98%E4%B8%AD%E5%BF%83&user_course_id=1988340
2025-09-11 16:43:19,139 - INFO - 选修课测试结果:
2025-09-11 16:43:19,139 - INFO -   URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=11362&user_course_id=1991630&name=%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%BF%83
2025-09-11 16:43:19,139 - INFO -   页面到达正确: ✅
2025-09-11 16:43:19,139 - INFO -   视频加载成功: ✅
2025-09-11 16:43:19,139 - INFO -   当前URL: https://edu.nxgbjy.org.cn/nxxzxy/index.html#/video_page?id=11362&user_course_id=1991630&name=%E5%AD%A6%E4%B9%A0%E4%B8%AD%E5%BF%83
2025-09-11 16:43:19,139 - INFO - ============================================================
2025-09-11 16:43:19,139 - INFO - 正在清理资源...
2025-09-11 16:43:19,414 - INFO - 浏览器已关闭
2025-09-11 16:43:19,414 - INFO - 资源清理完成
